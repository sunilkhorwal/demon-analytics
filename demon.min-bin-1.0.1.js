var d,DemonEvent;d=function(){defaults={segments:[],title:document.getElementsByTagName("title")[0].innerHTML,error:[],events:[],user:{}},d.prototype.init=function(f){d.prototype.params(),d.prototype.bindEvents(),"undefined"!=typeof f&&f(d)},d.prototype.params=function(){var f=window.location.href,f=f.substr(f.indexOf("?")+1);f.split("&").forEach(d.prototype.getParamArray)},d.prototype.getParamArray=function(f){defaults.segments.push(f)},d.prototype.onComplete=function(f){f(defaults)},d.prototype.onError=function(f){f(defaults.error)},d.prototype.fireEvent=function(f,g){g&&defaults.events.push({e:g}),d.prototype.set()},d.prototype.set=function(){var f=new XMLHttpRequest;f.open("POST","/demon/init/fire",!0),f.setRequestHeader("Content-type","application/json"),f.onreadystatechange=function(){4==f.readyState&&200==f.status||defaults.error.push(f.responseText)},console.log(defaults),f.send(JSON.stringify(defaults))},d.prototype.bindEvents=function(){for(var f=document.getElementsByTagName("input"),g=0;g<f.length;g++)"submit"==f[g].getAttribute("type")&&f[g].addEventListener("click",d.prototype.broadcast)},d.prototype.broadcast=function(f){for(defaults.user.Button=f.srcElement.value,c=d.prototype.parent(f,"form"),c=document.getElementById(c),f=0;f<c.length;f++)"INPUT"==c[f].tagName&&c[f].value&&(defaults.user[c[f].name]=c[f].value);d.prototype.fireEvent("subscribed")},d.prototype.console=function(){console.log(defaults)},d.prototype.parent=function(f,g){var h=document.getElementById(f.srcElement.id);if(null!==h&&""!==g){for(h=h.parentNode,g=g.toUpperCase();"HTML"!==h.tagName;){if(h.tagName===g)return h.id;h=h.parentNode}return h}}},DemonEvent=demon=new d;